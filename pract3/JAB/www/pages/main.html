<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <title>JAB</title>
    <link rel="stylesheet" href="../css/layui.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

</head>
<body>
<div class="layui-header header">
    <div class="layui-container">
        <div class="header-demo">
            <!-- 头部 logo -->
            <a href="#" class="logo">
                <img src="../img/logo-social.png" alt="Logo JAB">
            </a>
            <ul class="menu">
                <li><a href="#?cid=1">Educació</a></li>
                <li><a href="#?cid=2">Tecnologia</a></li>
                <li><a href="#?cid=3">Cultura</a></li>
                <li data-cid="4"><a href="../pages/chat.html">Xat</a></li>
            </ul>
            
              <div class="search">
                <form action="/search" method="POST" style="line-height: 60px;">
                    <input type="text", name="keyword" style=" width: 100px">
                    <button class="iconfont icon-sousuo"></button>
                </form>
            </div>
            <div class="login-btn">
                <a href="../pages/profile.html" class="logo">
                    <img src="../img/social-ico.png" alt="Foto de perfil" style="width:50px;height:50px;">
                </a>
            </div>
        </div>
    </div>
</div>

<div class="layui-container">
    <div class="layui-row main" style="margin-top: 20px">
        <div class="layui-col-md9">
            <div class="articles">
                <div id="articleContainer"></div>
            </div>    
            <div id="pagination" style="text-align: center"></div>
        </div>
        <div class="layui-col-md3 layui-hide-xs">
            <div class="side">
                <div class="rank">
                    <div class="rank_title">
                        <h3>Articles Populars</h3>
                    </div>
                    <div class="rank_list">
                        <a class="truncate" href="../pages/article.html" author="B"><b><span class="rank_num"></b></span>Títol 1</a>
                        <a class="truncate" href="../pages/article.html" author="B"><b><span class="rank_num"></b></span>Títol 2</a>
                        <a class="truncate" href="../pages/article.html" author="B"><b><span class="rank_num"></b></span>Títol 3</a>
                        <a class="truncate" href="../pages/article.html" author="B"><b><span class="rank_num"></b></span>Títol 4</a>
                        <a class="truncate" href="../pages/article.html" author="B"><b><span class="rank_num"></b></span>Títol 5</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="layui-footer footer" style="margin-top: 13rem;">
    <div class="footer_links">
        <a href="#">Sobre JAB</a>
        <span>|</span>
        <a href="#">Contacte</a>
        <span>|</span>
        <a href="#">Web</a>
    </div>
    <p class="copyright">
        CopyRight © 2023 JoanAliciaBernat All Rights Reserved<br>
        Telèfon:010-****888 xICP*******8x
    </p>
</div>

</body>
</html>

<script src="../js/main.js"></script>
<script src="../js/index.js"></script>
<script src="../js/layui.js"></script>
<script>
    for (var i = 1; i <= 5; i++) {
      var articleDiv = document.createElement("div");
      articleDiv.className = "articles";

      var innerHTML = `
        <div class="layui-card article">
          <div class="layui-card-header">
            <a href="#" class="news_pic">
              <img src="../img/social-ico.png">
            </a>
          </div>
          <div class="layui-card-body">
            <a href="../pages/article.html" class="trucate news_title">Títol ${i}</a>
            <div class="author_info">
              <div class="author">
                <img src="../img/social-ico.png" alt="author">
                <a href="#">Autor</a>
              </div>
              <div class="time">Data creació</div>
            </div>
          </div>
        </div>
      `;

      articleDiv.innerHTML = innerHTML;
      articleContainer.appendChild(articleDiv);
    }
</script>
<script>
    layui.use('laypage', function() {
        var laypage = layui.laypage;

        //执行一个laypage实例
        laypage.render({
            elem: 'pagination' //注意，这里的 test1 是 ID，不用加 # 号
            , count: {{paginate.total}} //数据总数，从服务端得到
            , curr: {{ paginate.page }}
            , limit: {{ paginate.per_page}},
                prev: 'Anterior', // 上一页的显示文本
                next : 'Següent'
            , jump: function(obj, first) {
                // obj包含了当前分页的所有参数，比如：
                //首次不执行
                if (!first) {
                    //do something
                    let searchParams = new URLSearchParams(location.search);
                    searchParams.set('page', obj.curr);
                    // 更新 url 调用浏览器默认的方式请求后端
                    location.search = searchParams.toString();
                    // ajax 进行请求  动态更新 jquery 修改页面
                }
            },
        });
    });
</script>
<script>
    $(document).ready(function() {
        $('.rank_list .truncate').each(function(index) {
          $(this).find('.rank_num').text(index + 1 + ". ");
        });
      });
</script>